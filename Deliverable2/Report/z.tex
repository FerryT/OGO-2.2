\documentclass[12pt]{article}
\usepackage{ltcadiz}
\usepackage{listings}
\lstset{breaklines=true, numbers=left}

\title{Report on OGO 2.2 Softwarespecification\\ Assignment 1a}
\author{
        Femke Jansen and Lasse Blaauwbroek OGO 2.2 group 6 \\
                Department of Computer Science\\
        Technical University Eindhoven\\
}
\date{\today}

\begin{document}

\maketitle

\begin{abstract}

\end{abstract}

\begin{axdef}
[Null]
\end{axdef}

\begin{axdef}
BoardWith : \nat
\end{axdef}

\begin{axdef}
BoardHeight : \nat
\end{axdef}

\begin{axdef}
Rotation == \{0DEG, 90DEG, 180DEG, 270DEG\}
\end{axdef}

\begin{axdef}
BoardResponse == \{FAILED, SUCCESS, WIN\}
\end{axdef}

\begin{axdef}
Hint == \{NORTH, EAST, SOUTH, WEST, NORTH\_EAST, \\ \t1 EAST\_SOUTH, SOUTH\_WEST, WEST\_NORTH\}
\end{axdef}

\begin{schema}{Occupied}
\Xi Board \\
coord? : AbsoluteCoord \\
output! : \bool
\where
\IF (tiles(coord).type = BrokenRobotTile \; \; \vee \\ \t1
tiles(coord).occupies = Null \\
\THEN
output! = \true \\
\ELSE
output! = \false
\end{schema}

\begin{schema}{ConveyorUnitDest}
\Xi Board \\
input? : AbsoluteCoord \\
output! : AbsoluteCoord
\where
\IF tiles(input?).type = ConveyorTile \; \; \wedge \\ \t1
\exists d : AbsoluteCoord @ \\ \t2
\IF \neg Occupied(d) \; \; \wedge \\ \t3
rotation = 0DEG \Rightarrow \\ \t4 input?.x = d.x + 1 \wedge input?.y = d.y \\ \t3
rotation = 90DEG \Rightarrow \\ \t4 input?.x = d.x \wedge input?.y = d.y - 1
\\ \t3
rotation = 180DEG \Rightarrow \\ \t4 input?.x = d.x - 1 \wedge input?.y = d.y \\ \t3
rotation = 270DEG \Rightarrow \\ \t4 input?.x = d.x \wedge input?.y = d.y + 1 \\ \t2
\THEN output! = d \\ \t2
\ELSE output! = input? \\
\ELSE output! = input?
\end{schema}

\begin{schema}{ConveyorDest}
\Xi Board \\
input? : AbsoluteCoord \\
output! : AbsoluteCoord
\where
\IF  ConveyorUnitDest(input?) = input? \\
\THEN output! = input? \\
\ELSE output! = ConveyorDest(ConveyorUnitDest(input?))
\end{schema}

\begin{schema}{Adjacent}
\Xi Board \\
coordA? : AbsoluteCoord \\
coordB? : AbsoluteCoord \\
output! : \bool
\where
\IF \|coordA.x - coordB.x\| + \|coordA.y - coordB.y\| = 1 \\ \t1
\neg Occupied(coordB) \\
\THEN output! = \true \\
\ELSE output! = \false
\end{schema}

\begin{schema}{Reachable}
\Xi Board
coordA? : AbsoluteCoord \\
coordB? : AbsoluteCoord \\
output! : \bool
\where
\IF Adjacent(coordA, coordB)
\THEN
output! = \true
\end{schema}

\begin{schema}{AbsoluteCoord}
x : \nat \cup \{0\} \\
y : \nat \cup \{0\}
\where
x < BoardWidth \\
y < BoardHeight
\end{schema}

\begin{schema}{RelativeCoord}
x : \num \\
y : \num
\end{schema}

\begin{schema}{NormalTile}
Tile
\end{schema}

\begin{schema}{HintTile}
Tile
\end{schema}

\begin{schema}{BrokenRobotTile}
Tile
\end{schema}

\begin{schema}{HomeTile}
Tile \\
target : Robot
\end{schema}

\begin{schema}{ConveyorTile}
Tile \\
rotation : Rotation
\end{schema}

\begin{schema}{Tile}
type : \{NormalTile, HomeTile, ConveyorTile, \\ \t1 BrokenRobotTile, HintTile\} \\
occupies : Robot \cup Null
\end{schema}

\begin{schema}{Board}
tiles : \power (AbsoluteCoord \fun Tile) \\
robots : \power Robot
\where
\forall r : robots | \exists c : \dom tiles @  \\ \t1 tiles(c).type = HomeTile \wedge tiles(c).target = r \wedge \\ \t1 
\exists d : \dom tiles @ d.occupies = r \wedge Reachable((c, d))
\end{schema}

\begin{schema}{BoardSnapshot}
tiles : \power (AbsoluteCoord \fun Tile) \\
\end{schema}

\begin{schema}{Rule}
possibleMoves : \power RelativeCoord \\
possibleRotations : \power Rotation
\end{schema}

\begin{schema}{Robot}
rules : Rules
\end{schema}

\begin{schema}{Viewer}
controller : Controller
\end{schema}

\begin{schema}{Controller}
board : Board \\
robots : \power Robot
viewer : Viewer
\end{schema}

\end{document} 