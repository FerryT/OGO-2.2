\begin{msc}
msc {

b [label="Board"],
c [label="Controller"],
d [label="Viewer"];

b box b [label=""],
d box d [label=""],
c box c [label=""];

|||;

b rbox b [label="make snapshot"];
b -> c [label="notifyViewer(snapshot)"];
c -> d [label="notifyStateChange(snapshot)"];
d rbox d [label="updateView()"];

|||;

d box d [label="", textbgcolor="black"],
c box c [label="", textbgcolor="black"],
b box b [label="", textbgcolor="black"];

}
\end{msc}
\digraph[scale=0.5]{HMSC_upview1}{
rankdir=LR;
p5 [label="Update viewer",shape="Mrecord",style=filled];
p6 [label="",shape="point"];
notrob1 [label="Notify robots",shape="Mrecord"];
p55 [label="",shape="point"];
p66 [label="",shape="point"];
retnt [label="Return Normal tile",shape="Mrecord"];
retct [label="Return Conveyor tile",shape="Mrecord"];
retht [label="Return Hint tile",shape="Mrecord"];
ordex [label="Ordinary exchange",shape="Mrecord"];
spcex [label="Special exchange",shape="Mrecord"];
retnt->p5;
retct->p5;
retht->p5;
p5->p55;
p55->p66;
p66->p6;
p55->notrob1;
notrob1->p66;
p6->ordex;
p6->spcex;
}
\digraph[scale=0.5]{HMSC_upview2}{
rankdir=LR;
begin [label="",shape="invtriangle"];
end [label="",shape="triangle"];
p1 [label="",shape="point"];
p8 [label="",shape="point"];
uv [label="Update viewer",shape="Mrecord",style=filled];
init [label="Initialize",shape="Mrecord"];
retmt [label="Return Home tile",shape="Mrecord"];
endgame [label="End game",shape="Mrecord"];
begin->p1;
p1->init;
retmt->uv->endgame;
endgame->p8;
p8->p1;
p8->end;
}
\digraph[scale=0.5]{HMSC_upview3}{
rankdir=LR;
p2 [label="",shape="point"];
p22 [label="",shape="point"];
p77 [label="",shape="point"];
mvreq [label="Robot move request",shape="Mrecord"];
ordex [label="Ordinary exchange",shape="Mrecord"];
spcex [label="Special exchange",shape="Mrecord"];
p7 [label="Update viewer",shape="Mrecord",style=filled];
notrob2 [label="Notify robots",shape="Mrecord"];
ordex->p7;
spcex->p7;
p7->p77;
p77->p22;
p22->p2;
p2->mvreq;
p77->notrob2;
notrob2->p22;
}